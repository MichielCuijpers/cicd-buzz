sudo: required

language: python

services:
  - docker

script:
  - python -m pytest -v

after_success:
  - if [ "$TRAVIS_BRANCH" == "master" ]; then
    docker login -u $DOCKER_USER -p $DOCKER_PASS;
    docker build -t $TRAVIS_REPO_SLUG .;
    docker push $TRAVIS_REPO_SLUG;
    fi

deploy:
  app: $HEROKU_APP_NAME
  provider: heroku
  api_key:
    secure: $HEROKU_API_KEY